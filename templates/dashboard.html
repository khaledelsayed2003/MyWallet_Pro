{% extends 'base.html' %}

{% block content %}

<h2 class="mb-4 fw-bold">Dashboard</h2>

<div class="row">
  <div class="col-md-4">
    <div class="card shadow-sm mb-3">
      <div class="card-body">
        <h5>Total Income</h5>
        <h3 class="text-success fw-bold">$ {{ '%.2f'|format(total_income) }}</h3>
      </div>
    </div>

    <div class="card shadow-sm mb-3">
      <div class="card-body">
        <h5>Total Expenses</h5>
        <h3 class="text-danger fw-bold">$ {{ '%.2f'|format(total_expense) }}</h3>
      </div>
    </div>
    
    <div class="card shadow-sm mb-3">
      <div class="card-body">
        <h5>Balance</h5>
        <h3 class="fw-bold">$ {{ '%.2f'|format(balance) }}</h3>
      </div>
    </div>
    <div class="mood-area">
      <img
        src="{{ url_for('static', filename='images/money_anim.gif') }}"
        alt="coin-wallet"
        class="mood-gif"
      />
    </div>
  </div>
  
  <div class="col-md-8">
    <div class="card shadow-sm">
      <div class="card-body">
        <h5 class="mb-3">Expense Distribution</h5>
        <canvas id="expenseChart" height="150"></canvas>
      </div>
    </div>
  </div>
</div>

<hr class="my-4" />

<h4 class="fw-bold mb-3">Recent Transactions</h4>

<!-- Reusable Transaction Table component -->
{% include "components/transaction_table.html" %}

{% if category_labels and category_values %}
<script>
  const CATEGORY_LABELS = {{ category_labels | tojson }};
  const CATEGORY_VALUES = {{ category_values | tojson }};
</script>
{% endif %}

{% endblock %}
